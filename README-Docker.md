# üê≥ –ó–∞–ø—É—Å–∫ SK –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ Docker

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª —Å –ø—Ä–∏–º–µ—Ä–æ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
cp .env.docker .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` —Ñ–∞–π–ª –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:
- `OPENAI_API_KEY` - –≤–∞—à API –∫–ª—é—á OpenAI
- `VND_VECTOR_STORE_ID` - ID –≤–∞—à–µ–≥–æ VND vector store
- `LEGAL_VECTOR_STORE_ID` - ID –≤–∞—à–µ–≥–æ Legal vector store
- `NEXTAUTH_SECRET` - —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è NextAuth (—Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Å–ª—É—á–∞–π–Ω—É—é —Å—Ç—Ä–æ–∫—É)

### 2. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose up --build

# –ò–ª–∏ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
docker-compose up -d --build
```

### 3. –î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é

- **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**: http://localhost:3000
- **pgAdmin**: http://localhost:5050 (admin@admin.com / admin)

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose down

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å —É–¥–∞–ª–µ–Ω–∏–µ–º volumes (–í–ù–ò–ú–ê–ù–ò–ï: —É–¥–∞–ª–∏—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ë–î!)
docker-compose down -v

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker-compose logs -f app
docker-compose logs -f postgres

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker-compose restart app
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–µ—Ä–≤–∏—Å–æ–≤

### PostgreSQL Database
- **–ü–æ—Ä—Ç**: 5432
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: sk_database
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**: sk_user
- **–ü–∞—Ä–æ–ª—å**: sk_password

### Next.js Application
- **–ü–æ—Ä—Ç**: 3000
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏**: –î–∞
- **Healthcheck**: –í—Å—Ç—Ä–æ–µ–Ω

### pgAdmin (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- **–ü–æ—Ä—Ç**: 5050
- **Email**: admin@admin.com
- **–ü–∞—Ä–æ–ª—å**: admin

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ PostgreSQL
docker-compose logs postgres

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose restart
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –º–∏–≥—Ä–∞—Ü–∏—è–º–∏
```bash
# –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—Ä—É—á–Ω—É—é
docker-compose exec app npx prisma migrate deploy

# –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ Prisma –∫–ª–∏–µ–Ω—Ç
docker-compose exec app npx prisma generate
```

### –û—á–∏—Å—Ç–∫–∞ –∏ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose down

# –£–¥–∞–ª–∏—Ç–µ –æ–±—Ä–∞–∑—ã
docker-compose down --rmi all

# –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ —Å –Ω—É–ª—è
docker-compose up --build --force-recreate
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏

–í–∞—à–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã PostgreSQL –Ω–µ –±—É–¥—É—Ç –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã, —Ç–∞–∫ –∫–∞–∫:
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ä–∞–∑–Ω—ã–µ –ø–æ—Ä—Ç—ã (5432 –¥–ª—è –Ω–æ–≤–æ–≥–æ, –≤–∞—à–∏ –Ω–∞ –¥—Ä—É–≥–∏—Ö –ø–æ—Ä—Ç–∞—Ö)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–∞—è Docker —Å–µ—Ç—å `sk-network`
- –†–∞–∑–Ω—ã–µ –∏–º–µ–Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π PostgreSQL –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:
1. –ò–∑–º–µ–Ω–∏—Ç–µ `DATABASE_URL` –≤ `.env` —Ñ–∞–π–ª–µ
2. –£–¥–∞–ª–∏—Ç–µ —Å–µ–∫—Ü–∏—é `postgres` –∏–∑ `docker-compose.yml`
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à PostgreSQL –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ Docker —Å–µ—Ç–∏

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è |
|------------|----------|--------------|
| `OPENAI_API_KEY` | API –∫–ª—é—á OpenAI | ‚úÖ |
| `VND_VECTOR_STORE_ID` | ID VND vector store | ‚úÖ |
| `LEGAL_VECTOR_STORE_ID` | ID Legal vector store | ‚úÖ |
| `NEXTAUTH_SECRET` | –°–µ–∫—Ä–µ—Ç –¥–ª—è NextAuth | ‚úÖ |
| `NEXTAUTH_URL` | URL –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è | ‚úÖ |
| `DATABASE_URL` | URL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î | ‚úÖ |